(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1144],{29248:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cars/my-cars",function(){return o(17082)}])},17082:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return eo}});var r=o(85893),n=o(10682),s=o(28395),i=o(67399),l=o(67294),a=o(5616),d=o(48263),c=o(87462),u=o(63366),h=o(90512),g=o(58510),m=o(90948),x=o(71657),p=o(21987),Z=o(1977),v=o(8027);function j(e){return(0,v.ZP)("MuiCard",e)}(0,Z.Z)("MuiCard",["root"]);let f=["className","raised"],C=e=>{let{classes:t}=e;return(0,g.Z)({root:["root"]},j,t)},y=(0,m.ZP)(p.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),w=l.forwardRef(function(e,t){let o=(0,x.Z)({props:e,name:"MuiCard"}),{className:n,raised:s=!1}=o,i=(0,u.Z)(o,f),l=(0,c.Z)({},o,{raised:s}),a=C(l);return(0,r.jsx)(y,(0,c.Z)({className:(0,h.Z)(a.root,n),elevation:s?8:void 0,ref:t,ownerState:l},i))});function S(e){return(0,v.ZP)("MuiCardActions",e)}(0,Z.Z)("MuiCardActions",["root","spacing"]);let M=["disableSpacing","className"],b=e=>{let{classes:t,disableSpacing:o}=e;return(0,g.Z)({root:["root",!o&&"spacing"]},S,t)},k=(0,m.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,c.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),P=l.forwardRef(function(e,t){let o=(0,x.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:s}=o,i=(0,u.Z)(o,M),l=(0,c.Z)({},o,{disableSpacing:n}),a=b(l);return(0,r.jsx)(k,(0,c.Z)({className:(0,h.Z)(a.root,s),ownerState:l,ref:t},i))});function N(e){return(0,v.ZP)("MuiCardContent",e)}(0,Z.Z)("MuiCardContent",["root"]);let R=["className","component"],I=e=>{let{classes:t}=e;return(0,g.Z)({root:["root"]},N,t)},_=(0,m.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),E=l.forwardRef(function(e,t){let o=(0,x.Z)({props:e,name:"MuiCardContent"}),{className:n,component:s="div"}=o,i=(0,u.Z)(o,R),l=(0,c.Z)({},o,{component:s}),a=I(l);return(0,r.jsx)(_,(0,c.Z)({as:s,className:(0,h.Z)(a.root,n),ownerState:l,ref:t},i))});function A(e){return(0,v.ZP)("MuiCardMedia",e)}(0,Z.Z)("MuiCardMedia",["root","media","img"]);let B=["children","className","component","image","src","style"],O=e=>{let{classes:t,isMediaComponent:o,isImageComponent:r}=e;return(0,g.Z)({root:["root",o&&"media",r&&"img"]},A,t)},F=(0,m.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e,{isMediaComponent:r,isImageComponent:n}=o;return[t.root,r&&t.media,n&&t.img]}})(({ownerState:e})=>(0,c.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),H=["video","audio","picture","iframe","img"],z=["picture","img"],D=l.forwardRef(function(e,t){let o=(0,x.Z)({props:e,name:"MuiCardMedia"}),{children:n,className:s,component:i="div",image:l,src:a,style:d}=o,g=(0,u.Z)(o,B),m=-1!==H.indexOf(i),p=!m&&l?(0,c.Z)({backgroundImage:`url("${l}")`},d):d,Z=(0,c.Z)({},o,{component:i,isMediaComponent:m,isImageComponent:-1!==z.indexOf(i)}),v=O(Z);return(0,r.jsx)(F,(0,c.Z)({className:(0,h.Z)(v.root,s),as:i,role:!m&&l?"img":void 0,ref:t,style:p,ownerState:Z,src:m?l||a:void 0},g,{children:n}))});var T=o(82589),L=o(23972);let U=e=>{let{content:t,num:o}=e,[n,s]=l.useState(!1),i=()=>{s(!n)};if(t)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[n?t:null==t?void 0:t.slice(0,o),t.length>o&&!n&&"..."]}),t.length>200&&(0,r.jsx)("button",{onClick:i,style:{border:"none",color:"goldenrod",background:"white",color:"#f0151f",padding:"0px",cursor:"pointer"},children:n?"See Less":"Read More"})]})};function X(e){let{car:t,setScrollShow:o,setCurrentId:n,setModalShow:s,setDeleteId:i}=e;return(0,r.jsxs)(w,{sx:{maxWidth:345},children:[(0,r.jsx)(D,{component:"img",alt:"green iguana",height:"140",image:null==t?void 0:t.images[0].url}),(0,r.jsxs)(E,{children:[(0,r.jsx)(L.Z,{gutterBottom:!0,variant:"h5",component:"div",children:null==t?void 0:t.name}),(0,r.jsx)(L.Z,{variant:"body2",color:"text.secondary",children:(0,r.jsx)(U,{content:null==t?void 0:t.description,num:30})}),(0,r.jsxs)(L.Z,{variant:"body2",color:"text.secondary",children:["Price: â‚¦",null==t?void 0:t.price]}),(0,r.jsxs)(L.Z,{variant:"body2",color:"text.secondary",children:["Stock: ",null==t?void 0:t.stock]})]}),(0,r.jsxs)(P,{children:[(0,r.jsx)(T.Z,{size:"small",onClick:()=>{n(null==t?void 0:t._id),o(!0)},children:"Edit"}),(0,r.jsx)(T.Z,{onClick:()=>{i(null==t?void 0:t._id),s(!0)},size:"small",sx:{color:"red"},children:"Delete"})]})]})}var $=o(98456),G=o(5121),W=o(79779),Y=o(55678);o(71399);var q=o(6212),J=o(35005);let K=e=>{let{scrollShow:t,setScrollShow:o,currentId:n,setCurrentId:s,setProducts:a,toggleState:d}=e,[c,u]=(0,l.useState)(!0),[h,g]=(0,l.useState)(!1),[m,x]=(0,l.useState)(),[p,Z]=(0,l.useState)(),{url:v,update:j,setUpdate:f,imgUpdate:C,setImageUpdate:y}=l.useContext(W.f);l.useEffect(()=>(n&&(async()=>{try{u(!0);let{data:e}=await G.Z.get("".concat(v,"/product/").concat(n));console.log(e),Z(null==e?void 0:e.product),x(n),u(!1)}catch(e){u(!1),console.log(e)}})(),()=>{s(),f({}),y([])}),[v,n]);let w=async(e,t,r)=>{let n;(n=t.length>0?{...e,images:t}:e)||Y.Am.error("No Change to upload",{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:Y.sm});try{g(!0);let{data:e}=await G.Z.put("".concat(v,"/admin/product/").concat(r),n,{withCredentials:!0,credentials:"include"});g(!1),console.log(e),(null==e?void 0:e.success)&&(Y.Am.success("update Successful",{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:Y.sm}),d()),o(!1)}catch(e){console.log(e),g(!1)}};return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)(q.Z,{className:"modal-dialog-scrollable",show:t,onHide:()=>o(!1),children:[(0,r.jsx)(q.Z.Header,{closeButton:!0,children:(0,r.jsxs)(q.Z.Title,{children:["Update Car: ",null==p?void 0:p.name]})}),(0,r.jsxs)(q.Z.Body,{style:{height:"500px"},children:[!c&&p&&(0,r.jsx)(i.x$,{type:"update",car:p}),c&&(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)($.Z,{sx:{color:"green"}})})]}),(0,r.jsxs)(q.Z.Footer,{children:[(0,r.jsx)(J.Z,{variant:"secondary",onClick:()=>o(!1),children:"Close"}),!h&&(0,r.jsx)(J.Z,{variant:"primary",onClick:()=>w(j,C,m),children:"Save Changes"}),h&&(0,r.jsxs)(J.Z,{variant:"primary",children:[(0,r.jsx)($.Z,{size:20,sx:{color:"white"}})," "]})]})]}),(0,r.jsx)(Y.Ix,{})]})};o(25675);var Q=o(11163);function V(e){let{url:t}=l.useContext(W.f),[o,n]=(0,l.useState)(!1),s=async o=>{try{n(!0);let{data:r}=await G.Z.delete("".concat(t,"/admin/product/").concat(o),{withCredentials:!0,credentials:"include"});n(!1),e.toggleState(),e.setModalShow(!1)}catch(e){n(!1),alert("Error deleting product")}};return(0,r.jsxs)(q.Z,{...e,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,r.jsx)(q.Z.Header,{closeButton:!0,children:(0,r.jsx)(q.Z.Title,{id:"contained-modal-title-vcenter",children:"Delete Car"})}),(0,r.jsx)(q.Z.Body,{children:"Are you sure you want to delete this product"}),(0,r.jsxs)(q.Z.Footer,{children:[!o&&(0,r.jsx)(J.Z,{style:{background:"red",color:"white"},onClick:()=>{s(e.deleteId)},children:"Delete"}),o&&(0,r.jsx)(J.Z,{style:{background:"red",color:"white"},children:(0,r.jsx)($.Z,{size:20,sx:{color:"white"}})})]})]})}function ee(){let e=(0,Q.useRouter)(),[t,o]=l.useState(!1),{url:n}=l.useContext(W.f),[s,i]=(0,l.useState)([]),[c,u]=(0,l.useState)(!1),[h,g]=(0,l.useState)(),[m,x]=(0,l.useState)(),[p,Z]=(0,l.useState)(!1);l.useEffect(()=>{(async()=>{try{o(!0);let{data:e}=await G.Z.get("".concat(n,"/admin/products"),{withCredentials:!0,credentials:"include"});i(null==e?void 0:e.products),o(!1)}catch(e){o(!1),console.log(e)}})()},[n,p]);let v=()=>{Z(e=>!e)},[j,f]=l.useState(!1);return(0,r.jsxs)(a.Z,{sx:{flexGrow:1},children:[(0,r.jsxs)(d.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[t&&(0,r.jsx)("div",{style:{width:"100%",height:"40vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)($.Z,{style:{color:"#03A84E"}})}),0===s.length&&!t&&(0,r.jsxs)("div",{style:{width:"100%",height:"40vh"},children:[(0,r.jsx)("img",{style:{width:"100%",height:"40vh"},src:"/images/noProduct.svg",alt:"no-product"}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"You have not not uploaded any car yet"}),(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"Center"},children:(0,r.jsxs)(J.Z,{variant:"primary",onClick:()=>e.push("/cars/upload"),children:["Upload Car"," "]})})]}),s&&s.length>0&&!t&&s.map((e,t)=>(0,r.jsx)(d.ZP,{item:!0,xs:2,sm:4,md:4,children:(0,r.jsx)(X,{car:e,setScrollShow:u,setCurrentId:g,setModalShow:f,setDeleteId:x})},t))]}),(0,r.jsx)(K,{scrollShow:c,setScrollShow:u,currentId:h,setCurrentId:g,setProducts:i,toggleState:v}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(V,{show:j,onHide:()=>f(!1),deleteId:m,toggleState:v,setModalShow:f})})]})}let et=()=>(0,r.jsxs)(n.Z,{fluid:!0,className:"p-6",children:[(0,r.jsx)(s.CD,{heading:"My Cars"}),(0,r.jsx)(ee,{})]});var eo=et}},function(e){e.O(0,[7229,5130,7399,9774,2888,179],function(){return e(e.s=29248)}),_N_E=e.O()}]);